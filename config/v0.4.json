{
  "$id": "https://awslabs.github.io/duvet/config/v0.4.json",
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "Duvet Configuration",
  "type": "object",
  "properties": {
    "$schema": {
      "type": [
        "string",
        "null"
      ]
    },
    "report": {
      "$ref": "#/$defs/Report"
    },
    "requirement": {
      "type": "array",
      "items": {
        "$ref": "#/$defs/Requirement"
      }
    },
    "source": {
      "type": "array",
      "items": {
        "$ref": "#/$defs/Source"
      }
    },
    "specification": {
      "type": "array",
      "items": {
        "$ref": "#/$defs/Specification"
      }
    }
  },
  "additionalProperties": false,
  "$defs": {
    "CommentStyle": {
      "type": "object",
      "properties": {
        "content": {
          "type": "string",
          "default": "//#"
        },
        "meta": {
          "type": "string",
          "default": "//="
        }
      },
      "additionalProperties": false
    },
    "DefaultType": {
      "type": "string",
      "enum": [
        "implementation",
        "spec",
        "test",
        "exception",
        "todo",
        "implication"
      ]
    },
    "HtmlReport": {
      "type": "object",
      "properties": {
        "blob-link": {
          "anyOf": [
            {
              "$ref": "#/$defs/TemplatedString"
            },
            {
              "type": "null"
            }
          ]
        },
        "enabled": {
          "type": "boolean",
          "default": true
        },
        "issue-link": {
          "anyOf": [
            {
              "$ref": "#/$defs/TemplatedString"
            },
            {
              "type": "null"
            }
          ]
        },
        "path": {
          "type": "string",
          "default": ".duvet/reports/report.html"
        }
      },
      "additionalProperties": false
    },
    "JsonReport": {
      "type": "object",
      "properties": {
        "enabled": {
          "type": "boolean",
          "default": false
        },
        "path": {
          "type": "string",
          "default": ".duvet/reports/report.json"
        }
      },
      "additionalProperties": false
    },
    "Report": {
      "type": "object",
      "properties": {
        "html": {
          "anyOf": [
            {
              "$ref": "#/$defs/HtmlReport"
            },
            {
              "type": "null"
            }
          ]
        },
        "json": {
          "anyOf": [
            {
              "$ref": "#/$defs/JsonReport"
            },
            {
              "type": "null"
            }
          ]
        },
        "snapshot": {
          "anyOf": [
            {
              "$ref": "#/$defs/SnapshotReport"
            },
            {
              "type": "null"
            }
          ]
        }
      },
      "additionalProperties": false
    },
    "Requirement": {
      "type": "object",
      "properties": {
        "pattern": {
          "type": "string"
        }
      },
      "additionalProperties": false,
      "required": [
        "pattern"
      ]
    },
    "SnapshotReport": {
      "type": "object",
      "properties": {
        "enabled": {
          "type": "boolean",
          "default": false
        },
        "path": {
          "type": "string",
          "default": ".duvet/snapshot.txt"
        }
      },
      "additionalProperties": false
    },
    "Source": {
      "type": "object",
      "properties": {
        "comment-style": {
          "$ref": "#/$defs/CommentStyle"
        },
        "pattern": {
          "type": "string"
        },
        "type": {
          "$ref": "#/$defs/DefaultType"
        }
      },
      "additionalProperties": false,
      "required": [
        "pattern"
      ]
    },
    "Specification": {
      "type": "object",
      "properties": {
        "format": {
          "anyOf": [
            {
              "$ref": "#/$defs/SpecificationFormat"
            },
            {
              "type": "null"
            }
          ]
        },
        "source": {
          "type": "string",
          "default": ""
        }
      },
      "additionalProperties": false
    },
    "SpecificationFormat": {
      "type": "string",
      "enum": [
        "ietf",
        "markdown"
      ]
    },
    "TemplatedString": {
      "type": "string"
    }
  }
}